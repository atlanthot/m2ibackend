<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Chat</title>
		<script src="node_modules/socket.io/node_modules/socket.io-client/socket.io.js"></script>
		<script type="text/javascript">
		
			var socket = null;
			
			function dataFromServerHandler(data)
			{
				var num_cacahuete = parseInt(data.cacahuete);
				var num_poireaux = parseInt(data.poireaux);
				
				if( isNaN( num_cacahuete ) )
				{
					num_cacahuete = 0;
				}
				else
				{
					num_cacahuete++;
				}
				
				if( isNaN( num_poireaux ) )
				{
					num_poireaux = 0;
				}
				else
				{
					num_poireaux++;
				}
				
				setTimeout( 
						function()
						{
							socket.emit('data_from_client',  {cacahuete: num_cacahuete, poireaux: num_poireaux});
						}, 
						50
				);
			}
		
			window.onload = function()
			{
				socket = io.connect('127.0.0.1:3000');
				
				socket.emit('data_from_client',  {cacahuete: 0, poireaux: 0});
				socket.on('data_from_server', dataFromServerHandler );
			};
		
		</script>
    </head>
    <body>
    </body>
</html>